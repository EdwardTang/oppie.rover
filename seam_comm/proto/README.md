# Protocol Buffers & gRPC Definitions

This directory contains Protocol Buffers and gRPC service definitions for the oppie.xyz project.

## File Descriptions

- `*.proto` - Protocol Buffers definition files
- `*_pb2.py` - Python code auto-generated by protoc
- `*_pb2_grpc.py` - gRPC Python code auto-generated by protoc
- `generate_proto.py` - Helper script to generate Python code for all proto files

## How to Generate Code

To regenerate Python code, run the following commands:

```bash
# Run from project root directory
python -m grpc_tools.protoc -I./oppie_xyz/seam_comm/proto --python_out=./oppie_xyz/seam_comm/proto --grpc_python_out=./oppie_xyz/seam_comm/proto ./oppie_xyz/seam_comm/proto/rpc_service.proto

# Generate code for all other proto files
python -m grpc_tools.protoc -I./oppie_xyz/seam_comm/proto --python_out=./oppie_xyz/seam_comm/proto ./oppie_xyz/seam_comm/proto/common.proto ./oppie_xyz/seam_comm/proto/error_card.proto ./oppie_xyz/seam_comm/proto/event.proto ./oppie_xyz/seam_comm/proto/result_card.proto ./oppie_xyz/seam_comm/proto/task_card.proto
```

Note: After generation, you may need to manually fix import paths by changing absolute imports to relative imports, for example:
- `import common_pb2 as common__pb2` → `from . import common_pb2 as common__pb2`
- `import rpc_service_pb2 as rpc__service__pb2` → `from . import rpc_service_pb2 as rpc__service__pb2`

## Service Structure

`rpc_service.proto` defines the main RPC service interface, including:

- `Call` - Generic RPC method call (unary RPC)
- `Subscribe` - Event subscription stream (server streaming RPC)

Other proto files define various data structures and message types. 